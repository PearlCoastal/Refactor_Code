# 6.1 æç‚¼å‡½æ•°

![](../img/6.1.jpg)

> [åå‘é‡æ„ï¼š6.2 å†…è”å‡½æ•°](./6.2_inline_function_md))

> [ç¤ºä¾‹ 1]()
>
> [ç¤ºä¾‹ 2. æœ‰å±€éƒ¨å˜é‡]()
>
> [ç¤ºä¾‹ 3. å¯¹å±€éƒ¨å˜é‡å†èµ‹å€¼]()
>
## ä½¿ç”¨åœºæ™¯

- åˆé€‚åº”è¯¥æŠŠä»£ç æ”¾è¿›ç‹¬ç«‹çš„å‡½æ•°ï¼šå¦‚æœéœ€è¦èŠ±ä¸€ç‚¹æ—¶é—´æ‰èƒ½å¼„æ¸…è¿™ä¸ªå‡½æ•°åœ¨å¹²ä»€ä¹ˆçš„è¯ï¼Œå°±åº”è¯¥æç‚¼åˆ°ä¸€ä¸ªæ–°å‡½æ•°ä¸­

## ç¤ºä¾‹ 1

### é‡æ„å‰

```java
function printOwing(invoice)
{
    let outstanding = 0;
    console.log("***********************");
    console.log("**** Customer Owes ****");
    console.log("***********************");
    // calculate outstanding
    for (const o of invoice.orders)
    {
        outstanding += o.amount;
    }
    // record due date
    const today = Clock.today;
    invoice.dueDate = new Date(today.getFullYear(), today.getMonth(), today.getDate() + 30);
    //print details
    console.log(`name: ${invoice.customer}`);
    console.log(`amount: ${outstanding}`);
    console.log(`due: ${invoice.dueDate.toLocaleDateString()}`);
}
```

### STEP1. æç‚¼å‡ºâ€œæ‰“å°æ¨ªå¹…â€çš„ä»£ç 

```java
function printOwing(invoice)
{
    let outstanding = 0;
    printBanner();
    // calculate outstanding
    for (const o of invoice.orders)
    {
        outstanding += o.amount;
    }
    // record due date
    const today = Clock.today;
    invoice.dueDate = new Date(today.getFullYear(), today.getMonth(), today.getDate() + 30);
    //print details
    console.log(`name: ${invoice.customer}`);
    console.log(`amount: ${outstanding}`);
    console.log(`due: ${invoice.dueDate.toLocaleDateString()}`);
}
// NOTE
function printBanner()
{
    console.log("***********************");
    console.log("**** Customer Owes ****");
    console.log("***********************");
}
```

- åŒæ ·æç‚¼â€œæ‰“å°è¯¦ç»†ä¿¡æ¯â€éƒ¨åˆ†

```java
function printOwing(invoice)
{
    let outstanding = 0;
    printBanner();
    // calculate outstanding
    for (const o of invoice.orders)
    {
        outstanding += o.amount;
    }
    // record due date
    const today = Clock.today;
    invoice.dueDate = new Date(today.getFullYear(), today.getMonth(), today.getDate() + 30);
    printDetails();
}
// NOTE
function printDetails()
{
    console.log(`name: ${invoice.customer}`);
    console.log(`amount: ${outstanding}`);
    console.log(`due: ${invoice.dueDate.toLocaleDateString()}`);
}

```

## ç¤ºä¾‹ 2. æœ‰å±€éƒ¨å˜é‡

### é‡æ„å‰

```java
function printOwing(invoice)
{
    let outstanding = 0;
    printBanner();
    // calculate outstanding
    for (const o of invoice.orders)
    {
        outstanding += o.amount;
    }
    // record due date
    const today = Clock.today;
    invoice.dueDate = new Date(today.getFullYear(), today.getMonth(), today.getDate() + 30);
    //print details
    console.log(`name: ${invoice.customer}`);
    console.log(`amount: ${outstanding}`);
    console.log(`due: ${invoice.dueDate.toLocaleDateString()}`);
}
```

### STEP1. `print detail` è¿™ä¸€éƒ¨åˆ†æç‚¼ä¸ºå¸¦ä¸¤ä¸ªå‚æ•°çš„å‡½æ•°

```java
function printOwing(invoice)
{
    let outstanding = 0;
    printBanner();
    // calculate outstanding
    for (const o of invoice.orders) {
    outstanding += o.amount;
    }
    // record due date
    const today = Clock.today;
    invoice.dueDate = new Date(today.getFullYear(), today.getMonth(), today.getDate() + 30);
    printDetails(invoice, outstanding);
}
function printDetails(invoice, outstanding)
{
    console.log(`name: ${invoice.customer}`);
    console.log(`amount: ${outstanding}`);
    console.log(`due: ${invoice.dueDate.toLocaleDateString()}`);
}
```

## ç¤ºä¾‹ 3. å¯¹å±€éƒ¨å˜é‡å†èµ‹å€¼

### é‡æ„å‰

```java
function printOwing(invoice)
{
    let outstanding = 0;
    printBanner();
    // calculate outstanding
    for (const o of invoice.orders)
    {
        outstanding += o.amount;
    }
    recordDueDate(invoice);
    printDetails(invoice, outstanding);
}
```

### STEP1. å°†å˜é‡å£°æ˜ç§»åŠ¨åˆ°ä½¿ç”¨å¤„ä¹‹å‰

```java
function printOwing(invoice)
{
    printBanner();
    // calculate outstanding
    // NOTE
    let outstanding = 0;
    for (const o of invoice.orders)
    {
        outstanding += o.amount;
    }
    recordDueDate(invoice);
    printDetails(invoice, outstanding);
}
```

### STEP2. å°†æƒ³è¦æç‚¼çš„ä»£ç å¤åˆ¶åˆ°ç›®æ ‡å‡½æ•°ä¸­

```java
function printOwing(invoice)
{
    printBanner();
    // calculate outstanding
    let outstanding = 0;
    for (const o of invoice.orders)
    {
        outstanding += o.amount;
    }
    recordDueDate(invoice);
    printDetails(invoice, outstanding);
}

function calculateOutstanding(invoice)
{
    let outstanding = 0;
    for (const o of invoice.orders)
    {
        outstanding += o.amount;
    }
    return outstanding;
}
```

### STEP3. ä¿®æ”¹åŸæ¥çš„ä»£ç ï¼Œé›¶å…¶è°ƒç”¨æ–°å‡½æ•°

```java
function printOwing(invoice)
{
    printBanner();
    let outstanding = calculateOutstanding(invoice);
    recordDueDate(invoice);
    printDetails(invoice, outstanding);
}
function calculateOutstanding(invoice)
{
    let outstanding = 0;
    for (const o of invoice.orders)
    {
        outstanding += o.amount;
    }
    return outstanding;
}
```

- ä¿®æ”¹è¿”å›å€¼çš„åå­—ï¼Œä½¿å…¶ç¬¦åˆä¸€è´¯çš„é£æ ¼

- é¡ºæ‰‹å°†åŸæ¥çš„ `outstanding` å˜é‡å£°æ˜æˆ `constï¼Œ` é›¶å®ƒåœ¨åˆå§‹åŒ–ä¹‹åä¸èƒ½å†æ¬¡è¢«èµ‹å€¼

```java
function printOwing(invoice)
{
    printBanner();
    // NOTE
    const outstanding = calculateOutstanding(invoice);
    recordDueDate(invoice);
    printDetails(invoice, outstanding);
}
function calculateOutstanding(invoice)
{
    // NOTE
    let result = 0;
    for (const o of invoice.orders)
    {
        result += o.amount;
    }
    return result;
}


```

## é‡æ„å®ŒæˆğŸ€
