
# 6.8 å¼•å…¥å‚æ•°å¯¹è±¡

![](../img/6.8.jpg)

## ä½¿ç”¨åœºæ™¯

- å°†æ•°æ®ç»„ç»‡æˆç»“æž„
- ä½¿ç”¨å¿ƒå¾—æ•°æ®ç»“æž„ï¼Œå°†ä¼šç¼©çŸ­å‚æ•°çš„å‚æ•°åˆ—è¡¨

### é‡æž„å‰

```java
// æ¸©åº¦è¯»æ•°çš„æ•°æ®
const station = {
    name : "ZB1",
    readings : [
        {temp : 47, time : "2016-11-10 09:10"},
        {temp : 53, time : "2016-11-10 09:20"},
        {temp : 58, time : "2016-11-10 09:30"},
        {temp : 53, time : "2016-11-10 09:40"},
        {temp : 51, time : "2016-11-10 09:50"},
    ]
};

// æ‰¾å‡ºæŒ‡å®šèŒƒå›´çš„æ¸©åº¦è¯»æ•°
function readingsOutsideRange(station, min, max)
{
    return station.readings
        .filter(r = > r.temp < min || r.temp > max);
}

// è°ƒç”¨æ–¹
alerts = readingsOutsideRange(
    station,
    operatingPlan.temperatureFloor,
    operatingPlan.temperatureCeiling);

```

- `è°ƒç”¨æ–¹ä»ŽoperatingPlanä¸­æŠ½å‡ºäº†ä¸¤ä¸ªæ•°æ®ï¼Œå°†è¿™ä¸¤ä¸ªæ•°æ®ä¼ é€’` `readingOutsideRange`

è¿™ä¸¤é¡¹å„ä¸ç›¸å¹²çš„æ•°æ®æ¥è¡¨ç¤ºä¸€ä¸ªèŒƒå›´çš„æƒ…å†µï¼Œæœ€å¥½æ˜¯å°†å…¶ç»„åˆæˆä¸€ä¸ªå¯¹è±¡

### STEP1. å…ˆä¸ºè¦ç»„åˆçš„æ•°æ®å£°æ˜Žä¸€ä¸ªç±»

```java
class NumberRange
{
    constructor(min, max)
    {
        this._data = {min : min, max : max};
    }
    get min() { return this._data.min; }
    get max() { return this._data.max; }
}
```

- è°ƒç”¨æ–¹

```java
const range = new NumberRange(operatingPlan.temperatureFloor, operatingPlan.temperatureCeiling);
alerts = readingsOutsideRange(
    station,
    operatingPlan.temperatureFloor,
    operatingPlan.temperatureCeiling,
    range);
```

### STEP2. ä¿®æ”¹ä½¿ç”¨å‚æ•°çš„ä»£ç ï¼Œå°†ä¸€å †å‚æ•°å˜æˆä¸€ä¸ªå¯¹è±¡

```java
function readingsOutsideRange(station, range)
{
    return station.readings.filter(r = > !range.contains(r.temp));
}

// æ·»åŠ ä¸€ä¸ªç±»å‡½æ•°
contains(arg) { return (arg >= this.min && arg <= this.max); }

// è°ƒç”¨æ–¹
const range = new NumberRange(operatingPlan.temperatureFloor, operatingPlan.temperatureCeiling);
alerts = readingsOutsideRange(station, range);
```

## é‡æž„å®ŒæˆðŸŽ€
