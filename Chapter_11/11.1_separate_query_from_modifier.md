<!--
 * @Author: FEIFEI SUN
 * @Description: 
 * @Detail: 
 * @Date: 2023-04-28 10:07:48
 * 
-->
# 11.1 å°†æŸ¥è¯¢å‡½æ•°å’Œä¿®æ”¹å‡½æ•°åˆ†ç¦»

![](../img/11.1.jpg)

## ä½¿ç”¨åœºæ™¯

- ä»»ä½•æœ‰è¿”å›å€¼çš„å‡½æ•°ï¼Œéƒ½ä¸åº”è¯¥æœ‰çœ‹å¾—åˆ°çš„å‰¯ä½œç”¨

> çœ‹å¾—åˆ°çš„å‰¯ä½œç”¨çš„ä¼˜åŒ–æ–¹æ³•ï¼šå°†æŸ¥è¯¢æ‰€å¾—ç»“æœç¼“å­˜äºæŸä¸ªå­—æ®µä¸­ï¼Œè¿™æ ·ä¸€æ¥åç»­çš„é‡å¤æŸ¥è¯¢å°±å¯ä»¥å¤§å¤§åŠ å¿«é€Ÿåº¦

> `mf-cqs` ï¼šcommand-query separation

- æ—¢æœ‰è¿”å›å€¼åˆæœ‰å‰¯ä½œç”¨çš„å‡½æ•°ï¼Œä»æŸ¥è¯¢åŠ¨ä½œåˆ°ä¿®æ”¹åŠ¨ä½œä¸­åˆ†ç¦»å‡ºæ¥

### é‡æ„å‰

- å‡½æ•°ä½œç”¨ï¼š

  - éå†ä¸€ä»½ `miscreant` åå•ï¼Œæ£€æŸ¥ä¸€ç¾¤ `people` ä¸­æ˜¯å¦æ··è¿›äº†æ¶æ£ã€‚

  - å¦‚æœå‘ç°äº† `miscreant` å°±è¿”å›ä»–çš„åå­—

```java
function alertForMiscreant (people)
{
    for (const p of people)
    {
        if (p === "Don")
        {
            setOffAlarms();
            return "Don";
        }
        if (p === "John")
        {
            setOffAlarms();
            return "John";
        }
    }
    return "";
}
```

### STEP1. å¤åˆ¶æ•´ä¸ªå‡½æ•°ï¼Œå°†å…¶ä½œä¸ºä¸€ä¸ªæŸ¥è¯¢æ¥å‘½å

```java
function findMiscreant (people)
{
    for (const p of people)
    {
        if (p === "Don")
        {
            setOffAlarms();
            return "Don";
        }
        if (p === "John")
        {
            setOffAlarms();
            return "John";
        }
    }
    return "";
}
```

### STEP2. ä»æ–°å»ºçš„æŸ¥è¯¢å‡½æ•°ä¸­å»æ‰æ‰€æœ‰é€ æˆå‰¯ä½œç”¨çš„è¯­å¥

```java
function findMiscreant (people)
{
    for (const p of people)
    {
        if (p === "Don")
        {
            // setOffAlarms();
            return "Don";
        }
        if (p === "John")
        {
            // setOffAlarms();
            return "John";
        }
    }
    return "";
}
```

### STEP3. æŸ¥æ‰¾æ‰€æœ‰åŸå‡½æ•°çš„è°ƒç”¨è€…ï¼Œå°†å…¶ä¿®æ”¹ä¸ºè°ƒç”¨æ–°å»ºçš„æŸ¥è¯¢å‡½æ•°ï¼Œå¹¶åœ¨å…¶åè°ƒç”¨ä¸€æ¬¡åŸå‡½æ•°

- é‡æ„å‰ï¼šè°ƒç”¨è€…

```java
const found = alertForMiscreant(people);
```

- é‡æ„åï¼šè°ƒç”¨è€…

```java
const found = findMiscreant(people);
alertForMiscreant(people);
```

### STEP4. ä»ä¿®æ”¹å‡½æ•°ä¸­å»æ‰æ‰€æœ‰è¿”å›å€¼

```java
function alertForMiscreant (people)
{
    for (const p of people)
    {
        if (p === "Don")
        {
            setOffAlarms();
            return /*"Don"*/;
        }
        if (p === "John")
        {
            setOffAlarms();
            return /*"John"*/;
        }
    }
    return "";
}
```

### STEP5. æŸ¥è¯¢å‡½æ•°ä¸åŸå‡½æ•°ä¹‹é—´å­˜åœ¨å¤§é‡é‡å¤ä»£ç ï¼Œä½¿ç”¨ [7.9 æ›¿æ¢ç®—æ³•](../Chapter_7/7.9_substitute_algorithm.md)

```java
function alertForMiscreant (people)
{
    // æ›¿æ¢ç®—æ³•
    if (findMiscreant(people) !== "")
        setOffAlarms();
}

```

### é‡æ„å

```java
function alertForMiscreant (people)
{
    if (findMiscreant(people) !== "")
        setOffAlarms();
}

function findMiscreant (people)
{
    for (const p of people)
    {
        if (p === "Don")
        {
            // setOffAlarms();
            return "Don";
        }
        if (p === "John")
        {
            // setOffAlarms();
            return "John";
        }
    }
    return "";
}
```

- è°ƒç”¨è€…

```java
const found = findMiscreant(people);
alertForMiscreant(people);
```

## é‡æ„å®ŒæˆğŸ€
