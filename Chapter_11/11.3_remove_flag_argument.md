<!--
 * @Author: FEIFEI SUN
 * @Description: 
 * @Detail: 
 * @Date: 2023-04-28 10:09:15
 * 
-->
# 11.3 ç§»é™¤æ ‡è®°å‚æ•°

![](../img/11.3.jpg)

## ä½¿ç”¨åœºæ™¯

- æ ‡è®°å‚æ•°ï¼Œéšè—äº†å‡½æ•°è°ƒç”¨ä¸­å­˜åœ¨çš„å·®å¼‚æ€§

- å¦‚æœä¸€ä¸ªå‡½æ•°ä¸­æœ‰å¤šä¸ªæ ‡è®°å‚æ•°ï¼Œå¯èƒ½ä¸å¾—ä¸å°†å…¶ä¿ç•™ï¼Œå¦åˆ™å°±å¾—é’ˆå¯¹å„ä¸ªå‚æ•°çš„å„ä¸ªå–å€¼çš„æ‰€æœ‰ç»„åˆæƒ…å†µæä¾›æ˜ç¡®å‡½æ•°

### é‡æ„å‰

- è°ƒç”¨å‡½æ•°è®¡ç®— `shipment` çš„ `deliveryDate`

```java
aShipment.deliveryDate = deliveryDate(anOrder, true);
```

- å…¶ä»–çš„è°ƒç”¨ä»£ç 

```java
aShipment.deliveryDate = deliveryDate(anOrder, false);
```

- ä»ç¬¬äºŒä¸ªå‚æ•°çš„ `true` å’Œ `false` å¾ˆéš¾ææ¸…æ¥šå‡½æ•°è°ƒç”¨ä¸­çš„å·®å¼‚æ€§

- `deliveryDate` å‡½æ•°çš„ä¸»ä½“

```java
function deliveryDate(anOrder, isRush)
{
    if (isRush)
    {
        let deliveryTime;
        if (["MA", "CT"] .includes(anOrder.deliveryState)) deliveryTime = 1;
        else if (["NY", "NH"].includes(anOrder.deliveryState)) deliveryTime = 2;
        else deliveryTime = 3;
        return anOrder.placedOn.plusDays(1 + deliveryTime);
    }
    else
    {
        let deliveryTime;
        if (["MA", "CT", "NY"].includes(anOrder.deliveryState)) deliveryTime = 2;
        else if (["ME", "NH"] .includes(anOrder.deliveryState)) deliveryTime = 3;
        else deliveryTime = 4;
        return anOrder.placedOn.plusDays(2 + deliveryTime);
    }
}
```

### STEP1. åˆ©ç”¨ [10.1 åˆ†è§£æ¡ä»¶è¡¨è¾¾å¼](../Chapter_10/10.1_decompose_consitional.md)

```java
function deliveryDate(anOrder, isRush)
{
    if (isRush) return rushDeliveryDate(anOrder);
    else return regularDeliveryDate(anOrder);
}
function rushDeliveryDate(anOrder)
{
    let deliveryTime;
    if (["MA", "CT"] .includes(anOrder.deliveryState)) deliveryTime = 1;
    else if (["NY", "NH"].includes(anOrder.deliveryState)) deliveryTime = 2;
    else deliveryTime = 3;
    return anOrder.placedOn.plusDays(1 + deliveryTime);
}
function regularDeliveryDate(anOrder)
{
    let deliveryTime;
    if (["MA", "CT", "NY"].includes(anOrder.deliveryState)) deliveryTime = 2;
    else if (["ME", "NH"] .includes(anOrder.deliveryState)) deliveryTime = 3;
    else deliveryTime = 4;
    return anOrder.placedOn.plusDays(2 + deliveryTime);
}
```

### STEP2. ä¿®æ”¹è°ƒç”¨æ–¹ä»£ç 

- rush

```java
aShipment.deliveryDate = rushDeliveryDate(anOrder);
```

- regular

```java
aShipment.deliveryDate = regularDeliveryDate(anOrder);
```

## é‡æ„å®ŒæˆğŸ€
