<!--
 * @Author: FEIFEI SUN
 * @Description: 
 * @Detail: 
 * @Date: 2023-04-24 14:16:53
 * 
-->
# 9.3 ä»¥æŸ¥è¯¢å–ä»£æ´¾ç”Ÿå˜é‡

![](../img/9.3.jpg)

## ä½¿ç”¨åœºæ™¯

- å¯å˜æ•°æ®æ˜¯è½¯ä»¶ä¸­æœ€å¤§çš„é”™è¯¯æºå¤´ä¹‹ä¸€

- åœ¨ä¸€å¤„ä¿®æ”¹æ•°æ®ï¼Œå´åœ¨å¦ä¸€å¤„é€ æˆéš¾ä»¥å‘ç°çš„ç ´å

- å¼ºçƒˆå»ºè®®ï¼šå°½é‡æŠŠå¯å˜æ•°æ®çš„ä½œç”¨åŸŸé™åˆ¶åœ¨æœ€å°èŒƒå›´

## ç¤ºä¾‹ 1. å®Œç¾çš„å±•ç¤ºäº†ä»£ç çš„ä¸‘é™‹

### é‡æ„å‰

```java
get production() {return this._production;}

applyAdjustment(anAdjustment)
{
    this._adjustments.push(anAdjustment);
    this._production += anAdjustment.amount;
}
```

### é‡æ„å

```java
get production()
{
    return this._adjustments
                .reduce((sum, a) => sum + a.amount, 0);
}

applyAdjustment(anAdjustment)
{
    this._adjustments.push(anAdjustment);
    // this._production += anAdjustment.amount;
}
```

## ç¤ºä¾‹ 2. ä¸æ­¢ä¸€ä¸ªæ•°æ®æ¥æº

### é‡æ„å‰

```java
class ProductionPlan
{
    constructor (production)
    {
        this._production = production;
        this._adjustments = [];
    }
    get production() { return this._production; }
    applyAdjustment(anAdjustment)
    {
        this._adjustments.push(anAdjustment);
        this._production += anAdjustment.amount;
    }
}
```

### é‡æ„å

```java
class ProductionPlan
{
    get production()
    {
        assert(this._productionAccumulator === this.calculatedProductionAccumulator);
        return this._initialProduction + this._productionAccumulator;
    }
    get calculatedProductionAccumulator()
    {
        return this._adjustments
        .reduce((sum, a) => sum + a.amount, 0);
    }
}
```

### é‡æ„å®ŒæˆğŸ€
