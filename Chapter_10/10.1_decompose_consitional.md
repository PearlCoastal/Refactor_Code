# 10.1 åˆ†è§£æ¡ä»¶è¡¨è¾¾å¼

![](../img/10.1.jpg)

## ä½¿ç”¨åœºæ™¯

- å¤æ‚çš„æ¡ä»¶é€»è¾‘æ˜¯æœ€å¸¸å¯¼è‡´å¤æ‚åº¦ä¸Šå‡çš„åœ°ç‚¹ä¹‹ä¸€

- å°†å¤æ‚çš„æ¡ä»¶é€»è¾‘åˆ†è§£æˆå¤šä¸ªç‹¬ç«‹çš„å‡½æ•°ï¼Œæ ¹æ®æ¯ä¸ªå°å—å¤§å¦ˆçš„ç”¨é€”ï¼Œä¸ºåˆ†è§£è€Œå¾—çš„æ–°å‡½æ•°å‘½å

æœ¬é‡æ„æ‰‹æ³•ï¼Œæ˜¯[æç‚¼å‡½æ•°](../Chapter_6/6.1_extract_function.md)çš„ä¸€ä¸ªåº”ç”¨åœºæ™¯

### é‡æ„å‰

```java
if (!aDate.isBefore(plan.summerStart) && !aDate.isAfter(plan.summerEnd))
    charge = quantity * plan.summerRate;
else
    charge = quantity * plan.regularRate + plan.regularServiceCharge;
```

### STEP1. å°†æ¡ä»¶åˆ¤æ–­æç‚¼åˆ°ä¸€ä¸ªç‹¬ç«‹çš„å‡½æ•°ä¸­

```java
if (summer())
    charge = quantity * plan.summerRate;
else
    charge = quantity * plan.regularRate + plan.regularServiceCharge;

function summer()
{
    return !aDate.isBefore(plan.summerStart) && !aDate.isAfter(plan.summerEnd);
}
```

### STEP2

### 1. æç‚¼æ¡ä»¶åˆ¤æ–­ä¸ºçœŸçš„åˆ†æ”¯

```java
if (summer())
    charge = summerCharge();
else
    charge = quantity * plan.regularRate + plan.regularServiceCharge;

function summer()
{
    return !aDate.isBefore(plan.summerStart) && !aDate.isAfter(plan.summerEnd);
}
function summerCharge()
{
    return quantity * plan.summerRate;
}
```

### 2. æç‚¼æ¡ä»¶åˆ¤æ–­ä¸ºå‡çš„åˆ†æ”¯

```java
if (summer())
    charge = summerCharge();
else
    charge = regularCharge();
function summer()
{
    return !aDate.isBefore(plan.summerStart) && !aDate.isAfter(plan.summerEnd);
}
function summerCharge()
{
    return quantity * plan.summerRate;
}
function regularCharge()
{
    return quantity * plan.regularRate + plan.regularServiceCharge;
}
```

### STEP3. ç”¨ä¸‰å…ƒè¿ç®—ç¬¦é‡æ–°å®‰æ’æ¡ä»¶è¯­å¥

```java
charge = summer() ? summerCharge() : regularCharge();
function summer() {
return !aDate.isBefore(plan.summerStart) && !aDate.isAfter(plan.summerEnd);
}
function summerCharge() {
return quantity * plan.summerRate;
}
function regularCharge() {
return quantity * plan.regularRate + plan.regularServiceCharge;
}
```

## é‡æ„å®ŒæˆğŸ€
