# 7.4 å·²æŸ¥è¯¢å–ä»£ä¸´æ—¶å˜é‡
![](../img/7.4.jpg)
## ä½¿ç”¨åœºæ™¯

### é‡æ„å‰

```java
class Order
{
    constructor(quantity, item)
    {
        this._quantity = quantity;
        this._item = item;
    }
    get price()
    {
        var basePrice = this._quantity * this._item.price;
        var discountFactor = 0.98;
        if (basePrice > 1000)
            discountFactor -= 0.03;
        return basePrice * discountFactor;
    }
}
```

### STEP1. å°†ä¸´æ—¶å˜é‡å˜æˆå‡½æ•°

```java
class Order
{
    constructor(quantity, item)
    {
        this._quantity = quantity;
        this._item = item;
    }
    get price()
    {
        const basePrice = this._quantity * this._item.price; // å…ˆå£°æ˜æˆconstä»¥ä¾›æµ‹è¯•
        var discountFactor = 0.98;
        if (basePrice > 1000)
            discountFactor -= 0.03;
        return basePrice * discountFactor;
    }
}
```

- ç„¶åå°†èµ‹å€¼æ“ä½œçš„å³è¾¹æç‚¼æˆä¸€ä¸ªå–å€¼å‡½æ•°

```java
class Order
{
    get price()
    {
        const basePrice = this.basePrice;
        var discountFactor = 0.98;
        if (basePrice > 1000)
            discountFactor -= 0.03;
        return basePrice * discountFactor;
    }
    get basePrice()
    {
        return this._quantity * this._item.price;
    }
}
```

### STEP2. ä½¿ç”¨å†…è”å˜é‡

```java
class Order
{
    get price()
    {
        // const basePrice = this.basePrice;
        var discountFactor = 0.98;
        if (this.basePrice > 1000)
            discountFactor -= 0.03;
        return this.basePrice * discountFactor;
    }
}
```

### STEP3. å¯¹ `discountFactor` é‡å¤åŒæ ·çš„æ­¥éª¤

```java
class Order
{
    get price()
    {
        return this.basePrice *this.discountFactor;
    }
    get basePrice()
    {
return this._quantity* this._item.price;
    }
    get discountFactor()
    {
        var discountFactor = 0.98;
        if (this.basePrice > 1000)
            discountFactor -= 0.03;
        return discountFactor;
    }
}
```

## é‡æ„å®ŒæˆğŸ€
