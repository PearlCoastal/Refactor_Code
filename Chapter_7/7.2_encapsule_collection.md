# 7.2 å°è£…é›†åˆ

![](../img/7.2.jpg)

## ä½¿ç”¨åœºæ™¯

- å°è£…é›†åˆæ—¶å¸¸çŠ¯çš„é”™è¯¯ï¼šåªå¯¹é›†åˆå˜é‡çš„è®¿é—®è¿›è¡Œäº†å°è£…ï¼Œä½†ä¾ç„¶è®©å–å€¼å‡½æ•°è¿”å›é›†åˆæœ¬èº«
- ä½¿é›†åˆçš„é•¿è¿œå˜é‡å¯ä»¥ç›´æ¥è¢«ä¿®æ”¹ï¼Œè€Œå°è£…ä»–çš„ç±»å…¨ç„¶ä¸çŸ¥

### é‡æ„å‰

```java
class Person
{
    constructor(name)
    {
        this._name = name;
        this._courses = [];
    }
    get name() { return this._name; }
    get courses() { return this._courses; }
    set courses(aList) { this._courses = aList; }
}

class Course
{
    constructor(name, isAdvanced)
    {
        this._name = name;
        this._isAdvanced = isAdvanced;
    }
    get name() { return this._name; }
    get isAdvanced() { return this._isAdvanced; }
}
```

- client

```java
numAdvancedCourses = aPerson.courses
                         .f ilter(c = &gt; c.isAdvanced)
                         .length;
```

- å¯¹è¯¾ç¨‹åˆ—è¡¨çš„å°è£…è¿˜ä¸å®Œæ•´ï¼Œå¯¹åˆ—è¡¨æ•´ä½“çš„ä»»ä½•æ›´æ–°æ“ä½œï¼Œéƒ½èƒ½é€šè¿‡è®¾å€¼å‡½æ•°å¾—åˆ°æ§åˆ¶

```java
const basicCourseNames = readBasicCourseNames(filename);
aPerson.courses = basicCourseNames.map(name = > new Course(name, false));
```

- å®¢æˆ·ç«¯é€šè¿‡ç›´æ¥æ›´æ–°è¯¾ç¨‹åˆ—è¡¨æ˜¾ç„¶æ›´å®¹æ˜“ï¼Œå°±ç ´åäº† `Person` ç±»çš„å°è£…æ€§

```java
for (const name of readBasicCourseNames(filename))
{
    aPerson.courses.push(new Course(name, false));
}
```

### STEP1. ä¸ºç±»æ·»åŠ ä¸¤ä¸ªæ–¹æ³•ï¼Œä¸ºå®¢æˆ·ç«¯æä¾›â€œæ·»åŠ è¯¾ç¨‹â€å’Œâ€œç§»é™¤è¯¾ç¨‹â€çš„æ¥å£

```java
class Person
{
    addCourse(aCourse)
    {
        this._courses.push(aCourse);
    }
    removeCourse(
        aCourse, fnIfAbsent = () = > { throw new RangeError(); })
    {
        const index = this._courses.indexOf(aCourse);
        if (index == = -1)
            fnIfAbsent();
        else
            this._courses.splice(index, 1);
    }
}
```

- client

```java
for (const name of readBasicCourseNames(filename))
{
    aPerson.addCourse(new Course(name, false));
}
```

### STEP2. é€šå¸¸ `setCourse` è®¾ç½®å‡½æ•°å°±æ²¡å¿…è¦å­˜åœ¨äº†

### æ–¹æ³•1. é€šè¿‡ç§»é™¤è®¾ç½®å‡½æ•°ç§»é™¤å®ƒ

### æ–¹æ³•2. å¦‚æœæ²¡æ³•ç§»é™¤ï¼Œå°±æä¾›ä¸€ä¸ªè®¾ç½®æ–¹æ³•ä½œä¸ºAPIï¼Œè‡³å°‘è¦ç¡®ä¿ç”¨ä¸€ä»½å‰¯æœ¬ç»™å­—æ®µèµ‹å€¼ï¼Œä¸å»ä¿®æ”¹é€šè¿‡å‚æ•°ä¼ å…¥çš„é›†åˆ

```java
class Person
{
    set courses(aList) { this._courses = aList.slice(); }
}
```

### STEP3. åªè¦å¯èƒ½æ”¹å˜é›†åˆï¼Œå°±è¿”å›ä¸€ä¸ªå‰¯æœ¬

```java
class Person
{
    get courses() { return this._courses.slice(); }
}
```

### é‡æ„å

```java
class Person
{
    constructor(name)
    {
        this._name = name;
        this._courses = [];
    }
    get name() { return this._name; }
    get courses() { return this._courses.slice(); }
    set courses(aList) { this._courses = aList.slice(); }
    addCourse(aCourse)
    {
        this._courses.push(aCourse);
    }
    removeCourse(
        aCourse, fnIfAbsent = () = > { throw new RangeError(); })
    {
        const index = this._courses.indexOf(aCourse);
        if (index == = -1)
            fnIfAbsent();
        else
            this._courses.splice(index, 1);
    }
}

class Course
{
    constructor(name, isAdvanced)
    {
        this._name = name;
        this._isAdvanced = isAdvanced;
    }
    get name() { return this._name; }
    get isAdvanced() { return this._isAdvanced; }
}
```

- client

```java
for (const name of readBasicCourseNames(filename))
{
    aPerson.addCourse(new Course(name, false));
}
```

## é‡æ„å®ŒæˆğŸ€
