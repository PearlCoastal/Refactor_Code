# 12.6 ä»¥å­ç±»å–ä»£ç±»å‹ç 

![](../img/12.6.jpg)

> [åå‘é‡æ„ï¼š12.7 ç§»é™¤å­ç±»](./12.7_remove_subclass.md)

## ä½¿ç”¨åœºæ™¯

- è¡¨ç°åˆ†ç±»å…³ç³»çš„å·¥å…·
- 1. ç±»å‹ç å­—æ®µ
- 2. å¼•å…¥å­ç±»

- @Date: 2023-04-23 15:37:39

### é‡æ„å‰

```java
class Employee
{
    constructor(name, type)
    {
        this.validateType(type);
        this._name = name;
        this._type = type;
    }
    validateType(arg)
    {
        if (![ "engineer", "manager", "salesman" ].includes(arg))
            throw new Error(`Employee cannot be of type $ { arg }`);
    }
    toString() { return `${this._name}(${this._type})`; }
}
```

### STEP1. å°è£…å˜é‡ï¼Œå°†ç±»å‹ç è‡ªå°èµ·æ¥

```java
class Employee
{
    get type() { return this._type; }
    toString() { return `${this._name}(${this.type})`; }
}
```

// ä» engineer ç±»å‹ç å¼€å§‹é‡æ„ï¼Œç›´æ¥ç»§æ‰¿ Employeeç±»

```
class Engineer extends Employee
{
    get type() { return "engineer"; }
}
```

### STEP2. æ–°å»ºä¸€ä¸ªå·¥å‚å‡½æ•°å–ä»£æ„é€ å‡½æ•°ï¼Œä»¥ä¾¿å®‰æ”¾é€‰æ‹©å™¨é€»è¾‘

```java
class Employee
{
    function createEmployee(name, type)
    {
        switch (type)
        {
        case "engineer":
            return new Engineer(name, type);
        case "salesman":
            return new Salesman(name, type);
        case "manager":
            return new Manager(name, type);
        }
        return new Employee(name, type);
    }
}

class Salesman extends Employee
{
    get type() { return "salesman"; }
}

class Manager extends Employee
{
    get type() { return "manager"; }
}
```

### STEP3. å»æ‰ç±»å‹ç å­—æ®µä»¥åŠåœ¨è¶…ç±»ä¸­çš„å–å€¼å‡½æ•°

```java
class Employee
{
    constructor(name, type)
    {
        this.validateType(type);
        this._name = name;
        // this._type = type;
    }
    // get type() {return this._type;}
    toString() { return `${this._name}(${this.type})`; }
}
```

### STEP4. ç§»é™¤æ„é€ å‡½æ•°çš„ç±»å‹å‚æ•°

```java
class Employee
{
    constructor(name /*, type*/)
    {
        this._name = name;
    }
    function createEmployee(name, type)
    {
        switch (type)
        {
        case "engineer":
            return new Engineer(name /*, type*/);
        case "salesman":
            return new Salesman(name /*, type*/);
        case "manager":
            return new Manager(name /*, type*/);
        default:
            throw new Error(`Employee cannot be of type $ { type }`);
        }
    }
}
```

## é‡æ„å®ŒæˆğŸ€
